var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _react=_interopRequireDefault(require("react"));var _enzyme=require("enzyme");var _enzymeToJson=_interopRequireDefault(require("enzyme-to-json"));var _RadioGroup=_interopRequireDefault(require("../RadioGroup"));var _index=_interopRequireDefault(require("../index"));var _jsxFileName="/Users/linji/Documents/workspace/zarm/zarm/components/radio/__tests__/index.test.tsx",_this=this;function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var TestRadio=function(_React$Component){(0,_inherits2.default)(TestRadio,_React$Component);var _super=_createSuper(TestRadio);function TestRadio(){(0,_classCallCheck2.default)(this,TestRadio);return _super.apply(this,arguments);}(0,_createClass2.default)(TestRadio,[{key:"render",value:function render(){return _react.default.createElement("input",(0,_extends2.default)({},this.props,{__self:this,__source:{fileName:_jsxFileName,lineNumber:13,columnNumber:12}}));}}]);return TestRadio;}(_react.default.Component);describe('Radio',function(){it('renders correctly',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:19,columnNumber:28}},"\u9009\u9879\u4E00"));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('defaultChecked',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default,{defaultChecked:true,value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:25,columnNumber:7}},"\u9009\u9879\u4E00"));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('type is button',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default,{type:"button",value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:34,columnNumber:7}},"\u9009\u9879\u4E00"));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('type is cell',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default,{type:"cell",value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:43,columnNumber:7}},"\u9009\u9879\u4E00"));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('receive new checked',function(){var onChange=jest.fn();var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default,{value:"0",onChange:onChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:53,columnNumber:7}},"\u9009\u9879\u4E00"));wrapper.setProps({checked:true});wrapper.find('input[type="radio"]').simulate('change');expect(onChange).toBeCalled();});it('disabled',function(){var onChange=jest.fn();var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default,{value:"0",onChange:onChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:7}},"\u9009\u9879\u4E00"));wrapper.setProps({disabled:true});wrapper.find('input[type="radio"]').simulate('change');});});describe('Radio.Group',function(){describe('#getDerivedStateFromProps',function(){it('should get derived state from props correctly',function(){var props={value:1};var state=_RadioGroup.default.getDerivedStateFromProps(props);expect(state).toEqual({value:1});});it('should return null if  value field not in props',function(){var props={};var state=_RadioGroup.default.getDerivedStateFromProps(props);expect(state).toBeNull();});});describe('#getValue',function(){it('should get initial state from props correctly if props has value field',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{value:1,__self:_this,__source:{fileName:_jsxFileName,lineNumber:90,columnNumber:31}}));expect(wrapper.state()).toEqual({value:1});});it('should get initial state from props correctly if props has defaultValue field',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{defaultValue:1,__self:_this,__source:{fileName:_jsxFileName,lineNumber:94,columnNumber:31}}));expect(wrapper.state()).toEqual({value:1});});it('should get null',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:99,columnNumber:31}}));expect(wrapper.state()).toEqual({value:null});});});describe('#getChildChecked',function(){it('should get initial state from props correctly if component has single child',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:107,columnNumber:9}},_react.default.createElement(TestRadio,{checked:true,value:233,__self:_this,__source:{fileName:_jsxFileName,lineNumber:108,columnNumber:11}})));expect(wrapper.state()).toEqual({value:233});});it('should get initial state from props correctly if component has children',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:116,columnNumber:9}},_react.default.createElement(TestRadio,{checked:true,value:233,__self:_this,__source:{fileName:_jsxFileName,lineNumber:117,columnNumber:11}}),_react.default.createElement(TestRadio,{checked:true,value:222,__self:_this,__source:{fileName:_jsxFileName,lineNumber:118,columnNumber:11}})));expect(wrapper.state()).toEqual({value:222});});it('should get initial state from props correctly if component has invalid React element child',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:126,columnNumber:9}},_react.default.createElement(TestRadio,{checked:false,value:110,__self:_this,__source:{fileName:_jsxFileName,lineNumber:127,columnNumber:11}})));expect(wrapper.state()).toEqual({value:null});});});it('should render with children',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{id:"test-radio-group",__self:_this,__source:{fileName:_jsxFileName,lineNumber:136,columnNumber:7}},_react.default.createElement(TestRadio,{value:1,checked:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:137,columnNumber:9}}),_react.default.createElement(TestRadio,{value:2,checked:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:138,columnNumber:9}})));expect(wrapper.find('.za-radio-group__inner').children()).toHaveLength(2);expect(wrapper.prop('id')).toEqual('test-radio-group');});it('should render with cloned react element correctly',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_RadioGroup.default,{id:"test-radio-group",type:"button",__self:_this,__source:{fileName:_jsxFileName,lineNumber:147,columnNumber:7}},_react.default.createElement(TestRadio,{value:1,__self:_this,__source:{fileName:_jsxFileName,lineNumber:148,columnNumber:9}}),_react.default.createElement(TestRadio,{value:2,__self:_this,__source:{fileName:_jsxFileName,lineNumber:149,columnNumber:9}})));expect(wrapper.find(TestRadio).at(0).props()).toEqual({value:1,checked:false,type:'button',shape:'radius',disabled:false,onChange:expect.any(Function)});expect(wrapper.find(TestRadio).at(1).props()).toEqual({value:2,checked:false,type:'button',shape:'radius',disabled:false,onChange:expect.any(Function)});});it('should handle onChange event on radio group component',function(){var onChange=jest.fn();var wrapper=(0,_enzyme.mount)(_react.default.createElement(_RadioGroup.default,{id:"test-radio-group",onChange:onChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:173,columnNumber:7}},_react.default.createElement(TestRadio,{value:1,checked:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:174,columnNumber:9}}),_react.default.createElement(TestRadio,{value:2,checked:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:175,columnNumber:9}})));expect(wrapper.state('value')).toBeNull();var input=wrapper.find('.za-radio-group__inner').children().at(0).find('input');expect(input.props()).toEqual(expect.objectContaining({value:1,checked:false,type:undefined,shape:'radius',disabled:false,onChange:expect.any(Function)}));input.simulate('change');expect(onChange).toBeCalledWith(1);expect(wrapper.state('value')).toEqual(1);});it('should handle onChange event on the children',function(){var onChange1=jest.fn();var onChange2=jest.fn();var wrapper=(0,_enzyme.mount)(_react.default.createElement(_RadioGroup.default,{id:"test-radio-group",__self:_this,__source:{fileName:_jsxFileName,lineNumber:199,columnNumber:7}},_react.default.createElement(TestRadio,{value:1,checked:false,onChange:onChange1,__self:_this,__source:{fileName:_jsxFileName,lineNumber:200,columnNumber:9}}),_react.default.createElement(TestRadio,{value:2,checked:false,onChange:onChange2,__self:_this,__source:{fileName:_jsxFileName,lineNumber:201,columnNumber:9}})));expect(wrapper.state('value')).toBeNull();var input=wrapper.find('.za-radio-group__inner').children().at(0).find('input');expect(input.props()).toEqual({value:1,checked:false,type:undefined,shape:'radius',disabled:false,onChange:expect.any(Function)});input.simulate('change');expect(onChange1).toBeCalledTimes(1);expect(onChange2).not.toBeCalled();expect(wrapper.state('value')).toEqual(1);});it('renders correctly',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default.Group,{value:"0",onChange:jest.fn(),__self:_this,__source:{fileName:_jsxFileName,lineNumber:222,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:223,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:224,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",__self:_this,__source:{fileName:_jsxFileName,lineNumber:225,columnNumber:9}},"\u9009\u9879\u4E09")));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('receive new value',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default.Group,{value:"0",onChange:jest.fn(),__self:_this,__source:{fileName:_jsxFileName,lineNumber:233,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:234,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:235,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",__self:_this,__source:{fileName:_jsxFileName,lineNumber:236,columnNumber:9}},"\u9009\u9879\u4E09")));wrapper.setProps({value:'1'});});it('defaultValue',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default.Group,{defaultValue:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:244,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:245,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:246,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",__self:_this,__source:{fileName:_jsxFileName,lineNumber:247,columnNumber:9}},"\u9009\u9879\u4E09")));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('Radio checked',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default.Group,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:255,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:256,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",checked:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:257,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",__self:_this,__source:{fileName:_jsxFileName,lineNumber:260,columnNumber:9}},"\u9009\u9879\u4E09")));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('shape is radius',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default.Group,{shape:"radius",__self:_this,__source:{fileName:_jsxFileName,lineNumber:269,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:270,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:271,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",__self:_this,__source:{fileName:_jsxFileName,lineNumber:272,columnNumber:9}},"\u9009\u9879\u4E09")));expect(wrapper.find('.za-radio-group').hasClass('za-radio-group--radius')).toBe(true);});it('shape is round',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default.Group,{shape:"round",__self:_this,__source:{fileName:_jsxFileName,lineNumber:281,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:282,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:283,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",__self:_this,__source:{fileName:_jsxFileName,lineNumber:284,columnNumber:9}},"\u9009\u9879\u4E09")));expect(wrapper.find('.za-radio-group').hasClass('za-radio-group--round')).toBe(true);});it('block',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default.Group,{block:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:293,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:294,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:295,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",__self:_this,__source:{fileName:_jsxFileName,lineNumber:296,columnNumber:9}},"\u9009\u9879\u4E09")));expect(wrapper.find('.za-radio-group').hasClass('za-radio-group--block')).toBe(true);});it('type is cell',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default.Group,{type:"cell",__self:_this,__source:{fileName:_jsxFileName,lineNumber:305,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:306,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:307,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",disabled:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:308,columnNumber:9}},"\u9009\u9879\u4E09")));expect(wrapper.find('.za-radio-group').hasClass('za-radio-group--cell')).toBe(true);});it('radio group onChange event',function(){var onChange=jest.fn();var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default.Group,{shape:"round",onChange:onChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:319,columnNumber:7}},_react.default.createElement(_index.default,{value:"0",__self:_this,__source:{fileName:_jsxFileName,lineNumber:320,columnNumber:9}},"\u9009\u9879\u4E00"),_react.default.createElement(_index.default,{value:"1",__self:_this,__source:{fileName:_jsxFileName,lineNumber:321,columnNumber:9}},"\u9009\u9879\u4E8C"),_react.default.createElement(_index.default,{value:"2",disabled:true,__self:_this,__source:{fileName:_jsxFileName,lineNumber:322,columnNumber:9}},"\u9009\u9879\u4E09")));var firstCheckbox=wrapper.find(_index.default).first().dive().find('input[type="radio"]');firstCheckbox.simulate('change',{target:{checked:true}});expect(onChange).toBeCalledWith('0');});});