var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _react=_interopRequireDefault(require("react"));var _enzyme=require("enzyme");var _enzymeToJson=_interopRequireDefault(require("enzyme-to-json"));var _index=_interopRequireDefault(require("../index"));var _TabBarItem=_interopRequireDefault(require("../TabBarItem"));var _badge=_interopRequireDefault(require("../../badge"));var _jsxFileName="/Users/linji/Documents/workspace/zarm/zarm/components/tab-bar/__tests__/index.test.tsx",_this=this;var activeIcon=_react.default.createElement("div",{style:{width:'24px',height:'24px',background:'url(//cdn-health.zhongan.com/zarm/home-active.svg) top left / 24px 24px no-repeat'},__self:this,__source:{fileName:_jsxFileName,lineNumber:9,columnNumber:3}});var icon=_react.default.createElement("div",{style:{width:'24px',height:'24px',background:'url(//cdn-health.zhongan.com/zarm/home.svg) top left / 24px 24px no-repeat'},__self:this,__source:{fileName:_jsxFileName,lineNumber:20,columnNumber:3}});describe('TabBarItem',function(){it('should render with a badge',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_TabBarItem.default,{itemKey:"1",badge:{theme:'primary'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:31,columnNumber:29}}));expect(wrapper.prop('className')).toBe('za-tab-bar__item');expect(wrapper.prop('style')).toBeUndefined();expect(wrapper.find(_badge.default)).toBeTruthy();expect(wrapper.find(_badge.default).prop('theme')).toEqual('primary');});it('should render with content',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_TabBarItem.default,{itemKey:"1",title:_react.default.createElement("h1",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:40,columnNumber:38}},"test"),icon:_react.default.createElement("span",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:40,columnNumber:59}},"test icon"),__self:_this,__source:{fileName:_jsxFileName,lineNumber:40,columnNumber:7}}));expect(wrapper.find('.za-tab-bar__icon')).toBeTruthy();expect(wrapper.find('.za-tab-bar__icon').children()).toHaveLength(1);expect(wrapper.find('.za-tab-bar__icon').children().at(0).text()).toBe('test icon');expect(wrapper.find('.za-tab-bar__icon').children().at(0).type()).toBe('span');expect(wrapper.find('.za-tab-bar__title')).toBeTruthy();expect(wrapper.find('.za-tab-bar__title').contains(_react.default.createElement("h1",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:47,columnNumber:56}},"test"))).toBeTruthy();});it('should handle change event',function(){var mOnChange=jest.fn();var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_TabBarItem.default,{itemKey:1,onChange:mOnChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:52,columnNumber:29}}));wrapper.simulate('click');expect(mOnChange).toBeCalledWith(1);});it('should render with icon if it is selected',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_TabBarItem.default,{itemKey:"1",selected:true,title:_react.default.createElement("h1",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:59,columnNumber:47}},"test"),icon:_react.default.createElement("span",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:59,columnNumber:68}},"test icon"),__self:_this,__source:{fileName:_jsxFileName,lineNumber:59,columnNumber:7}}));expect(wrapper.prop('className')).toEqual('za-tab-bar__item za-tab-bar--active');expect(wrapper.find('.za-tab-bar__icon').contains(_react.default.createElement("span",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:62,columnNumber:55}},"test icon"))).toBeTruthy();});it('should render with active icon if it is selected',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_TabBarItem.default,{itemKey:"1",selected:true,title:_react.default.createElement("h1",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:47}},"test"),icon:_react.default.createElement("span",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:68}},"active icon"),__self:_this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:7}}));expect(wrapper.find('.za-tab-bar__icon').contains(_react.default.createElement("span",{__self:_this,__source:{fileName:_jsxFileName,lineNumber:69,columnNumber:55}},"active icon"))).toBeTruthy();});it('should render inline style',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_TabBarItem.default,{itemKey:"1",style:{color:'red',display:'flex'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:73,columnNumber:29}}));expect(wrapper.prop('style')).toHaveProperty('color','red');expect(wrapper.prop('style')).toHaveProperty('display','flex');});});describe('TabBar',function(){describe('snapshot',function(){it('should render correctly',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:83,columnNumber:9}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",icon:icon,activeIcon:activeIcon,__self:_this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:11}})));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('with defaultActiveKey',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default,{defaultActiveKey:"home",__self:_this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:9}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",icon:icon,activeIcon:activeIcon,__self:_this,__source:{fileName:_jsxFileName,lineNumber:93,columnNumber:11}})));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});it('with activeKey',function(){var wrapper=(0,_enzyme.render)(_react.default.createElement(_index.default,{activeKey:"home",__self:_this,__source:{fileName:_jsxFileName,lineNumber:101,columnNumber:9}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",icon:icon,activeIcon:activeIcon,__self:_this,__source:{fileName:_jsxFileName,lineNumber:102,columnNumber:11}})));expect((0,_enzymeToJson.default)(wrapper)).toMatchSnapshot();});});it('should handle change event',function(){var onChange=jest.fn();var wrapper=(0,_enzyme.mount)(_react.default.createElement(_index.default,{defaultActiveKey:"home",onChange:onChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:112,columnNumber:7}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",icon:icon,activeIcon:activeIcon,__self:_this,__source:{fileName:_jsxFileName,lineNumber:113,columnNumber:9}})));wrapper.find('.za-tab-bar__item').first().simulate('click');expect(onChange).toBeCalledWith('home');});it('should select first tab bar item if activeKey and defaultActivceKey are not existed',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default,{visible:false,className:"test",__self:_this,__source:{fileName:_jsxFileName,lineNumber:123,columnNumber:7}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",__self:_this,__source:{fileName:_jsxFileName,lineNumber:124,columnNumber:9}}),_react.default.createElement(_index.default.Item,{itemKey:"about us",title:"\u5173\u4E8E\u6211\u4EEC",__self:_this,__source:{fileName:_jsxFileName,lineNumber:125,columnNumber:9}})));expect(wrapper.childAt(0).prop('selected')).toBeTruthy();expect(wrapper.childAt(1).prop('selected')).toBeFalsy();});it('should render icon if selected is false(defaultActivceKey is not equal with itemKey)',function(){var onChange=jest.fn();var wrapper=(0,_enzyme.mount)(_react.default.createElement(_index.default,{defaultActiveKey:"home",onChange:onChange,__self:_this,__source:{fileName:_jsxFileName,lineNumber:135,columnNumber:7}},_react.default.createElement(_index.default.Item,{itemKey:"badge",title:"\u4E3B\u9875",icon:icon,activeIcon:activeIcon,badge:{shape:'circle',text:'3'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:136,columnNumber:9}})));wrapper.find(_index.default.Item).first().simulate('click');expect(onChange).toBeCalledWith('badge');expect(wrapper.find('.za-tab-bar__icon').contains(icon)).toBeTruthy();});it('should selected tab bar item if activeKey is equal with itemKey',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default,{defaultActiveKey:"home",__self:_this,__source:{fileName:_jsxFileName,lineNumber:152,columnNumber:7}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",__self:_this,__source:{fileName:_jsxFileName,lineNumber:153,columnNumber:9}})));expect(wrapper.find(_index.default.Item).prop('selected')).toBeTruthy();});it('should use element index as the fallback itemKey',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:161,columnNumber:7}},_react.default.createElement(_index.default.Item,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:162,columnNumber:9}}),_react.default.createElement(_index.default.Item,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:163,columnNumber:9}})));expect(wrapper.childAt(0).prop('itemKey')).toBe(0);expect(wrapper.childAt(1).prop('itemKey')).toBe(1);});it('should have hidden class name if visible prop is false',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default,{visible:false,className:"test",__self:_this,__source:{fileName:_jsxFileName,lineNumber:172,columnNumber:7}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",__self:_this,__source:{fileName:_jsxFileName,lineNumber:173,columnNumber:9}})));expect(wrapper.hasClass('test')).toBeTruthy();expect(wrapper.hasClass('za-tab-bar')).toBeTruthy();expect(wrapper.hasClass('za-tab-bar--hidden')).toBeTruthy();});it('should render children with extra props',function(){var wrapper=(0,_enzyme.shallow)(_react.default.createElement(_index.default,{visible:false,className:"test",__self:_this,__source:{fileName:_jsxFileName,lineNumber:183,columnNumber:7}},_react.default.createElement(_index.default.Item,{itemKey:"home",title:"\u4E3B\u9875",__self:_this,__source:{fileName:_jsxFileName,lineNumber:184,columnNumber:9}}),_react.default.createElement(_index.default.Item,{itemKey:"about us",title:"\u5173\u4E8E\u6211\u4EEC",__self:_this,__source:{fileName:_jsxFileName,lineNumber:185,columnNumber:9}})));expect(wrapper.childAt(0).props()).toEqual(expect.objectContaining({title:'主页',itemKey:'home',onChange:expect.any(Function),selected:true}));expect(wrapper.childAt(1).props()).toEqual(expect.objectContaining({title:'关于我们',itemKey:'about us',onChange:expect.any(Function),selected:false}));});});